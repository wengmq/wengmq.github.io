## MCP简介

- MCP官方介绍：
	- https://modelcontextprotocol.io/docs/getting-started/intro
- MCP（Model Context Protocol 模型上下文协议）是一种用于将 AI 应用程序连接到外部系统的开源标准。本身是一种协议，类似于http、https、DNS这种应用层的协议。

## MCP解决的场景

- 现在大部分的人工智能的应用可以回答大部分通用的问题，例如帮我用python写一个某某功能的函数，但是针对比较隐私的场景，AI却无法做到。你无法让人工智能直接去访问你公司内部的接口（例如有鉴权之类的AI也不知道怎么访问），但是你又需要通过这个内部的接口返回的数据来结合AI来回答你的问题，如果你不嫌麻烦可以承担一个中间人的角色，你手动请求内部接口后再把返回数据发给AI，让AI来进一步分析。

- 而MCP解决的就是这个场景！它定义了AI智能体应该如何与你后端的程序/接口进行交互。

- 使用 MCP，Claude ChatGPT 等人工智能应用程序可以连接到数据源（例如本地文件、数据库）、工具（例如搜索引擎、计算器）和工作流（例如专门提示），使它们能够访问关键信息并执行任务。


- 将 MCP 视为 AI 应用程序的 USB-C 端口。正如 USB-C 提供了一种连接电子设备的标准化方式一样，MCP 提供了一种将 AI 应用程序连接到外部系统的标准化方式。

![](assets/Pasted%20image%2020251218120229.png)

- MCP 由两层组成：（从概念上讲，数据层是内层，而传输层是外层。）

	- 数据层：定义基于 JSON-RPC 的客户端-服务器通信协议，包括生命周期管理和核心原语，例如工具、资源、提示和通知。

	- 传输层：定义支持客户端和服务器之间数据交换的通信机制和通道，包括特定于传输的连接建立、消息成帧和授权。

## MCP交互流程

- MCP 遵循客户端-服务器架构，其中 MCP 主机（如 Claude Code 或 Claude Desktop 等 AI 应用程序）与一个或多个 MCP 服务器建立连接。MCP 主机通过为每个 MCP 服务器创建一个 MCP 客户端来实现这一点。每个 MCP 客户端与其对应的 MCP 服务器保持专用连接。

- MCP 架构的主要参与者：

	- **MCP 主机（MCP Host）**：协调和管理一个或多个 MCP 客户端的 AI 应用程序。 （如 Claude Code 或 Claude Desktop 等 AI 应用程序）

	- **MCP 客户端**（MCP Client）：维护与 MCP 服务器的连接并从 MCP 服务器获取上下文以供 MCP 主机使用的组件。Client 是在 Host 内部的一段逻辑／模块，负责将 Agent／LLM 的请求转换成遵循 MCP 协议的调用，并与 Server 通信。一个 Client 对应一个 Server 连接。**它在这里的作用类似“代理”**，负责把大语言模型与 MCP Server 连接起来。

	- **MCP 服务器**（MCP Server）：为 MCP 客户端提供上下文的程序（例如通过MCP服务器，去获取你们公司内部的日志数据）

- 例如：Visual Studio Code 充当 MCP 主机。当 Visual Studio Code 建立到 MCP 服务器（例如 Sentry MCP 服务器）的连接时，Visual Studio Code 运行时实例化一个 MCP 客户端对象，该对象维护与 Sentry MCP 服务器的连接。当 Visual Studio Code 随后连接到另一个 MCP 服务器（例如本地文件系统服务器）时，Visual Studio Code 运行时实例化一个额外的 MCP 客户端对象以维护此连接。
![](assets/Pasted%20image%2020251218132246.png)


