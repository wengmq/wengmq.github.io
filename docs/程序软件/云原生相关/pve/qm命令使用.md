
在 Proxmox VE (PVE) 中，命令行操作虚拟机的核心工具是 **`qm`** (Qemu/KVM Virtual Machine Manager)。

所有的操作都需要指定虚拟机的 **VMID**（例如 100, 101 等）。以下是常用操作的命令汇总：

---

### 1. 基础开关机操作

| 动作       | 命令                   | 说明                            |
| -------- | -------------------- | ----------------------------- |
| **启动**   | `qm start <VMID>`    | 开启虚拟机                         |
| **关机**   | `qm shutdown <VMID>` | 发送关机信号（需要虚拟机内安装了 Guest Agent） |
| **强制停止** | `qm stop <VMID>`     | 相当于直接拔电源，用于虚拟机卡死时             |
| **重启**   | `qm reboot <VMID>`   | 重启虚拟机                         |
| **暂停**   | `qm suspend <VMID>`  | 暂停到内存                         |
| **恢复**   | `qm resume <VMID>`   | 恢复运行                          |


---

### 2. 销毁与删除

销毁操作是**不可逆**的，请务必确认 VMID。

- **完全销毁：**
    
```
qm destroy <VMID>
```
    
    > **注意：** 如果虚拟机正在运行，该命令会报错。你需要先执行 `qm stop <VMID>`。
    
- **销毁并清理相关数据（如磁盘）：** 通常 `destroy` 默认会删除关联的虚拟磁盘，但如果你想确保清除所有配置，可以加上参数：

    
```
qm destroy <VMID> --purge
```
    

---

### 3. 查看状态与列表

在操作之前，你可能需要确认虚拟机的 ID 或当前状态：

- **查看所有虚拟机列表：**
```
qm list
```

- **查看特定虚拟机的详细状态：**

```
qm status <VMID>
```


---

### 4. 进阶技巧

- **克隆虚拟机：**

```
qm clone <源VMID> <新VMID> --name <新名称>
```

- **修改配置（如设置内存为 4G）：**

```
qm set <VMID> --memory 4096
```
- **解锁虚拟机：** 如果虚拟机因为之前的任务中断被锁定（Status 出现 `lock: backup` 等），可以使用：

```
qm unlock <VMID>
```


---

### 💡 提示

如果你操作的是 **LXC 容器** 而不是虚拟机，请将命令开头的 `qm` 替换为 **`pct`**（例如 `pct start 100`）。

